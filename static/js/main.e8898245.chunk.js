(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{21:function(e,n,t){},25:function(e,n,t){"use strict";t.r(n);var r,o,i,c,a,s,l,u=t(0),d=t.n(u),b=t(12),f=t.n(b),j=(t(21),t(2)),p={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,"T",0],["T","T","T"],[0,0,0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},x=function(){var e="IJLOSTZ",n=e[Math.floor(Math.random()*e.length)];return p[n]},h=t(3),g=t(4),O=g.a.div(r||(r=Object(h.a)(["\n  width: auto;\n  /* border-radius: 5px; */\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"])),(function(e){return e.color}),(function(e){return 0===e.type?"0px solid":"4px solid"}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),m=t(1),v=function(e){var n=e.type;return Object(m.jsx)(O,{type:n,color:p[n].color})},y=d.a.memo(v),w=g.a.div(o||(o=Object(h.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(25vw / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border: 2px solid #333;\n  width: 100%;\n  max-width: 25vw;\n  background: #111;\n  position: relative;\n  .gameStatusText {\n    left: 0;\n    right: 0;\n    top: 45%;\n    width: 100%;\n    margin: auto;\n    max-width: 25vw;\n    padding: 1.5rem 0;\n    color: lightgrey;\n    font-size: 1.5rem;\n    text-align: center;\n    position: absolute;\n    font-family: Pixel, Arial, Helvetica, sans-serif;\n    background-color: #ff000070;\n  }\n"])),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.width})),S=function(e){var n=e.stage,t=e.pauseGame,r=e.gameOver;return Object(m.jsxs)(w,{width:n[0].length,height:n.length,children:[null===n||void 0===n?void 0:n.map((function(e){return e.map((function(e,n){return Object(m.jsx)(y,{type:e[0]},n)}))})),t&&Object(m.jsx)("div",{className:"gameStatusText",children:"Game Paused !!"}),r&&Object(m.jsx)("div",{className:"gameStatusText",children:"Game Over :("})]})},k=g.a.div(i||(i=Object(h.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  color: ",";\n  background: #000;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n"])),(function(e){return e.gameOver?"red":"#999"})),A=g.a.div(c||(c=Object(h.a)(["\n  width: 100%;\n  color: #999;\n  padding: 5px;\n  background: #000;\n  min-height: 30px;\n  font-size: 1rem;\n  align-items: center;\n  line-height: 1.5;\n  border-radius: 20px;\n  border: 4px solid #333;\n  box-sizing: border-box;\n  padding-inline-start: 0;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  p {\n    padding-left: 25px;\n  }\n  li {\n    margin-bottom: 5px;\n  }\n  .scores {\n    text-align: center;\n    border-top: 1px dashed #333;\n    border-bottom: 1px dashed #333;\n    padding: 10px 0;\n  }\n"]))),I=function(e){var n=e.gameOver,t=e.text;return Object(m.jsx)(k,{gameOver:n,children:t})},P=g.a.div(a||(a=Object(h.a)(["\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: ",";\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"])),(function(e){return e.disabled?"grey":"white"})),T=function(e){var n=e.callback,t=e.text,r=e.disabled;return Object(m.jsx)(P,{onClick:function(e){return!r&&n(e)},disabled:r,children:t})},E=t.p+"static/media/bg.d63cfd51.png",J=g.a.div(s||(s=Object(h.a)(["\n  width: 100vw;\n  height: 100vh;\n  background: url(",") #000;\n  background-size: cover;\n  overflow: hidden;\n"])),E),z=g.a.div(l||(l=Object(h.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n"]))),L=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},N=Array.from(Array(4),(function(){return new Array(4).fill(0)})),C=function(e,n,t){for(var r=t.x,o=t.y,i=0;i<(null===e||void 0===e?void 0:e.tetromino.length);i+=1)for(var c=0;c<e.tetromino[i].length;c+=1)if(0!==e.tetromino[i][c]&&(!n[i+e.pos.y+o]||!n[i+e.pos.y+o][c+e.pos.x+r]||"clear"!==n[i+e.pos.y+o][c+e.pos.x+r][1]))return!0},G=function(e,n){for(var t=1;t<=20;++t){if(C(e,n,{x:0,y:t}))return t-1}},M=function(e,n){var t=Object(u.useState)(L()),r=Object(j.a)(t,2),o=r[0],i=r[1],c=Object(u.useState)(0),a=Object(j.a)(c,2),s=a[0],l=a[1];return Object(u.useEffect)((function(){l(0);var t=function(t){var r=t.map((function(e){return e.map((function(e){return"clear"===e[1]?[0,"clear"]:e}))}));return e.tetromino.forEach((function(n,t){n.forEach((function(n,o){0!==n&&(r[t+e.pos.y][o+e.pos.x]=[n,"".concat(e.collided?"merged":"clear")])}))})),e.collided?(n(),function(e){return e.reduce((function(n,t){return-1===t.findIndex((function(e){return 0===e[0]}))?(l((function(e){return e+1})),n.unshift(new Array(e[0].length).fill([0,"clear"])),n):(n.push(t),n)}),[])}(r)):r};return i((function(e){return t(e)})),function(){}}),[e,n]),[o,i,s]},D=t(8);var R,Z,F=[40,100,300,1200],H=function(){return localStorage.getItem("tetrisScore")},B=function(e){return localStorage.setItem("tetrisScore",JSON.stringify(e))},U=function(){return Object(m.jsxs)(A,{children:[Object(m.jsx)("p",{children:"Controls"}),Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{children:"Pause : Enter"}),Object(m.jsxs)("li",{children:["Move right :",Object(m.jsx)("br",{})," Right Arrow"," "]}),Object(m.jsxs)("li",{children:["Move down :",Object(m.jsx)("br",{})," Down Arrow"]}),Object(m.jsxs)("li",{children:["Move left :",Object(m.jsx)("br",{})," Left Arrow"]}),Object(m.jsxs)("li",{children:["Rotate :",Object(m.jsx)("br",{})," Up Arrow"]}),Object(m.jsxs)("li",{children:["Full Drop :",Object(m.jsx)("br",{})," Space bar"]})]})]})},K=[2500,1250,625,300,0],q=function(e){var n=e.gameOver,t=Object(u.useState)(K),r=Object(j.a)(t,2),o=r[0],i=r[1];return Object(u.useEffect)((function(){var e=H();e?i(JSON.parse(e)):B(K)}),[n]),Object(m.jsxs)(A,{children:[Object(m.jsx)("div",{className:"scores",children:"Top 5 Scores"}),o.map((function(e,n){return Object(m.jsxs)("div",{className:"scores",children:["Score ",n+1,": ",e.toString().padStart(6,"0")]},n)}))]})},Q=t(16),V=g.a.div(R||(R=Object(h.a)(["\n  width: 100%;\n  color: #999;\n  padding: 5px;\n  display: flex;\n  font-size: 1rem;\n  min-height: 30px;\n  margin-bottom: 5px;\n  align-items: center;\n  box-sizing: border-box;\n  padding-inline-start: 0;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n"]))),W=g.a.div(Z||(Z=Object(h.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(4vw / ",")\n  );\n  width: 100%;\n  grid-gap: 1px;\n  max-width: 4vw;\n  grid-template-columns: repeat(",', 1fr);\n  margin-left: auto;\n  background-color: "#000";\n'])),(function(e){return e.height}),(function(e){return e.width}),(function(e){return e.width})),X=function(e){var n=function(e){var n=Object(Q.a)(e);return 2===n.length?(n.unshift([0,0]),n.push([0,0])):3===n.length&&n.unshift([0,0,0]),n}(e.tetromino);return Object(m.jsxs)(V,{children:["Upcoming",Object(m.jsx)(W,{width:4,height:4,children:null===N||void 0===N?void 0:N.map((function(e,t){return e.map((function(e,r){var o;return Object(m.jsx)(y,{type:(null===n||void 0===n||null===(o=n[t])||void 0===o?void 0:o[r])||0},"".concat(t,"-").concat(r))}))}))})]})},Y=d.a.memo(X),$=function(){var e=Object(u.useState)(null),n=Object(j.a)(e,2),t=n[0],r=n[1],o=Object(u.useState)(!1),i=Object(j.a)(o,2),c=i[0],a=i[1],s=Object(u.useState)(!1),l=Object(j.a)(s,2),d=l[0],b=l[1],f=function(){var e=Object(u.useState)({pos:{x:0,y:0},tetromino:p[0].shape,collided:!1}),n=Object(j.a)(e,2),t=n[0],r=n[1],o=Object(u.useState)(x().shape),i=Object(j.a)(o,2),c=i[0],a=i[1],s=function(e,n){var t=e.map((function(n,t){return e.map((function(e){return e[t]}))}));return n>0?t.map((function(e){return e.reverse()})):t.reverse()},l=Object(u.useCallback)((function(){r({pos:{x:4,y:0},tetromino:c,collided:!1}),a(x().shape)}),[c]);return[t,function(e){var n=e.x,t=e.y,o=e.collided;r((function(e){return Object(D.a)(Object(D.a)({},e),{},{pos:{x:e.pos.x+=n,y:e.pos.y+=t},collided:o})}))},l,function(e,n){var o=Object(D.a)({},t);o.tetromino=s(o.tetromino,n);for(var i=o.pos.x,c=1;C(o,e,{x:0,y:0});)if(o.pos.x+=c,(c=-(c+(c>0?1:-1)))>o.tetromino[0].length)return s(o.tetromino,-n),void(o.pos.x=i);r(o)},c]}(),h=Object(j.a)(f,5),g=h[0],O=h[1],v=h[2],y=h[3],w=h[4],k=M(g,v),A=Object(j.a)(k,3),P=A[0],E=A[1],N=function(e){var n=Object(u.useState)(0),t=Object(j.a)(n,2),r=t[0],o=t[1],i=Object(u.useState)(0),c=Object(j.a)(i,2),a=c[0],s=c[1],l=Object(u.useState)(0),d=Object(j.a)(l,2),b=d[0],f=d[1],p=Object(u.useCallback)((function(){e>0&&(s((function(n){return n+F[e-1]*(b+1)})),o((function(n){return n+e})))}),[b,e]);return Object(u.useEffect)((function(){p()}),[p,e,a]),[a,s,r,o,b,f]}(A[2]),R=Object(j.a)(N,6),Z=R[0],K=R[1],Q=R[2],V=R[3],W=R[4],X=R[5],$=function(e){console.log({dir:e}),C(g,P,{x:e,y:0})||O({x:e,y:0})},_=function(){Q>10*(W+1)&&(X((function(e){return e+1})),r(1e3/(W+1)+200)),C(g,P,{x:0,y:1})?(g.pos.y<1&&(!function(e){var n=JSON.parse(H());n.push(e),n.sort((function(e,n){return n-e})).splice(-1),B(n)}(Z),a(!0),r(!1)),O({x:0,y:0,collided:!0})):O({x:0,y:1,collided:!1})},ee=function(e){var n=e.keyCode;console.log("move",n),c||d||(37===n?$(-1):39===n?$(1):40===n?(console.log("dropPlayer"),r(null),_()):38===n?y(P,1):32===n&&(O({x:0,y:G(g,P),collided:!0}),r(100))),c||13!==n||ne()};!function(e,n){var t=Object(u.useRef)();Object(u.useEffect)((function(){t.current=e}),[e]),Object(u.useEffect)((function(){if(null!==n){var e=setInterval((function(){t.current()}),n);return function(){clearInterval(e)}}}),[n])}((function(){!c&&_()}),t);var ne=function(){console.log("callPauseGame"),d?(b(!1),r(1e3/(W+1)+200)):(r(null),b(!0))};return Object(m.jsx)(J,{role:"button",tabIndex:"0",onKeyUp:function(e){return!c&&!d&&function(e){var n=e.keyCode;console.log("keyUp",n),40!==n&&32!==n||r(1e3/(W+1)+200)}(e)},onKeyDown:function(e){return ee(e)},children:Object(m.jsxs)(z,{children:[Object(m.jsxs)("aside",{children:[Object(m.jsx)(T,{text:d?"|> Resume Game":"II Pause Game",callback:ne,disabled:c||1===g.tetromino.length}),Object(m.jsx)(Y,{tetromino:w}),Object(m.jsx)(U,{})]}),Object(m.jsx)(S,{stage:P,pauseGame:d,gameOver:c}),Object(m.jsxs)("aside",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(I,{text:"Score ".concat(Z)}),Object(m.jsx)(I,{text:"Rows ".concat(Q)}),Object(m.jsx)(I,{text:"Level ".concat(W)})]}),Object(m.jsx)(T,{text:1===g.tetromino.length||c?"Start Game":"Reset Game",callback:function(){E(L()),r(1e3/(W+1)+200),v(),b(!1),a(!1),K(0),V(0),X(0)}}),Object(m.jsx)(q,{gameOver:c})]})]})})},_=function(){return Object(m.jsx)("div",{className:"useDesktop",children:Object(m.jsx)("div",{className:"useDesktop-message",children:"Oops!! Tetris game is currently only available at web browser :("})})},ee=function(){var e=Object(u.useState)("desktop"),n=Object(j.a)(e,2),t=n[0],r=n[1];return Object(u.useEffect)((function(){var e=navigator.userAgent;/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?r("tablet"):/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)&&r("mobile")}),[]),Object(m.jsx)("div",{className:"App",children:"desktop"===t?Object(m.jsx)($,{}):Object(m.jsx)(_,{})})},ne=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,26)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),o(e),i(e),c(e)}))};f.a.render(Object(m.jsx)(ee,{}),document.getElementById("root")),ne()}},[[25,1,2]]]);
//# sourceMappingURL=main.e8898245.chunk.js.map